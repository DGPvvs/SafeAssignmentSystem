@using SafeAssignmentSystem.Models.SafeAssignmentViewModels;
@model IEnumerable<SafeAssignmentClosingViewModel>

@{
	if (Model.Count() > 0)
	{
		var first = Model.First();
		ViewBag.Title = $"Комплекс: {first.ComplexName}{Environment.NewLine}Инсталация: {first.PlantInstalationName}";
	}
	else
	{
		ViewBag.Title = "Няма открити наряди за тази позиция";
	}
}

<h2 class="text-center">@ViewBag.Title</h2>
<hr />

<div class="text-center row">
	@foreach (var safeAssignment in Model)
	{
		<div class="card col-4">
			<div class="card-body">
				<h6 class="mb-0">Номер на наряд: @safeAssignment.Number</h6>
				<p class="mb-0">Технологична позиция: @safeAssignment.TechnologicalPositionName</p>
				<p class="mb-0">Издаващ наряда: @safeAssignment.PersonRequestedOpeningOrder</p>
				<p class="mb-0">Откриващ наряда: @safeAssignment.ЕlectricianOpeningOrder</p>
				<p class="mb-0">Дата на откриване: @safeAssignment.OpeningDate Час на откриване: @safeAssignment.OpeningTime</p>
			</div>

			<a asp-controller="SafeAssignment"
				asp-action="ClosingSafeAssignmentPost"
				asp-route-id="@safeAssignment.Id"
				class="btn btn-warning mb-3 p-2">
				Закриване на наряд
			</a>
		</div>
	}
</div>
